<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B√†i H·ªçc Ph√¢n Gi√°c</title>
  
  <!-- Nh√∫ng Tailwind CSS ƒë·ªÉ style giao di·ªán -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Nh√∫ng React v√† ReactDOM (Phi√™n b·∫£n s·∫£n xu·∫•t) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  
  <!-- Nh√∫ng Babel ƒë·ªÉ tr√¨nh duy·ªát hi·ªÉu ƒë∆∞·ª£c c√∫ ph√°p JSX c·ªßa React -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    @keyframes dash {
      0% { stroke-dashoffset: 80; }
      100% { stroke-dashoffset: 0; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px) rotate(-2deg); }
      75% { transform: translateX(5px) rotate(2deg); }
    }
    .animate-shake {
      animation: shake 0.3s ease-in-out;
    }
  </style>
</head>
<body class="bg-white font-sans text-slate-800 m-0 p-0 h-screen flex flex-col">
  <div id="root" class="w-full h-full flex flex-col"></div>

  <!-- ƒêo·∫°n m√£ React ƒë∆∞·ª£c vi·∫øt b·∫±ng Babel -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    // --- B·ªò ICON B·∫∞NG SVG (Thay th·∫ø cho th∆∞ vi·ªán lucide-react) ---
    const BookOpen = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>);
    const CheckCircle2 = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><path d="m9 12 2 2 4-4"></path></svg>);
    const Info = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg>);
    const Sparkles = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path></svg>);
    const PenTool = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19 7-7 3 3-7 7-3-3z"></path><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="m2 2 7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>);
    const AlertCircle = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>);
    const PartyPopper = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5.8 11.3 2 22l10.7-3.79"></path><path d="M4 3h.01"></path><path d="M22 8h.01"></path><path d="M15 2h.01"></path><path d="M22 20h.01"></path><path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"></path><path d="m22 13-.82-.33c-.86-.36-1.86.07-2.27.89v0c-.31.62-1.06.87-1.72.58v0c-.71-.31-1.5-.2-2.07.32l-2.2 2"></path><path d="m11 19-.33-.82c-.36-.86.07-1.86.89-2.27v0c.62-.31.87-1.06.58-1.72v0c-.31-.71-.2-1.5.32-2.07l2-2.2"></path><path d="m14 14 3 3"></path></svg>);
    const Trophy = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>);
    const ArrowRight = ({ size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>);

    // --- COMPONENT H√åNH ƒê·ªòNG CHO PH·∫¶N L√ù THUY·∫æT ---
    const AnimatedBisector = () => {
      return (
        <div className="relative w-full max-w-xs mx-auto drop-shadow-xl bg-white rounded-full p-4 border-4 border-purple-100">
          <svg viewBox="0 0 100 100" className="w-full h-full">
            <polygon points="30,20 10,80 90,80" fill="#f8fafc" stroke="#334155" strokeWidth="3" strokeLinejoin="round" />
            <line x1="30" y1="20" x2="44" y2="80" stroke="#a855f7" strokeWidth="4" strokeDasharray="80" className="animate-[dash_2s_ease-in-out_infinite_alternate]" style={{ animation: "dash 2s ease-in-out infinite alternate" }} />
            <path d="M 25 35 Q 29 38 33.5 35" fill="none" stroke="#a855f7" strokeWidth="2.5" className="animate-pulse" />
            <path d="M 33.5 35 Q 39 38 45 35" fill="none" stroke="#a855f7" strokeWidth="2.5" className="animate-pulse" />
            <circle cx="30" cy="20" r="4" fill="#334155" />
            <text x="30" y="12" fontSize="8" fontWeight="bold" textAnchor="middle" fill="#334155">A</text>
            <circle cx="10" cy="80" r="4" fill="#334155" />
            <text x="5" y="85" fontSize="8" fontWeight="bold" fill="#334155">B</text>
            <circle cx="90" cy="80" r="4" fill="#334155" />
            <text x="95" y="85" fontSize="8" fontWeight="bold" textAnchor="end" fill="#334155">C</text>
          </svg>
        </div>
      );
    };

    // --- COMPONENT H√åNH Tƒ®NH CHO C√ÇU H·ªéI 1 ---
    const MiniTriangle = ({ type }) => (
      <svg viewBox="0 0 100 100" className="w-full h-full overflow-visible">
        <polygon points="30,20 10,80 90,80" fill="#f8fafc" stroke="#334155" strokeWidth="4" strokeLinejoin="round" />
        
        {type === 'altitude' && <><line x1="30" y1="20" x2="30" y2="80" stroke="#ef4444" strokeWidth="4" /><path d="M 30 73 L 37 73 L 37 80" fill="none" stroke="#ef4444" strokeWidth="3" /></>}
        {type === 'median' && <><line x1="30" y1="20" x2="50" y2="80" stroke="#3b82f6" strokeWidth="4" /><circle cx="50" cy="80" r="4" fill="#3b82f6" /><line x1="28" y1="77" x2="32" y2="83" stroke="#334155" strokeWidth="3" /><line x1="68" y1="77" x2="72" y2="83" stroke="#334155" strokeWidth="3" /></>}
        {type === 'bisector' && <><line x1="30" y1="20" x2="44" y2="80" stroke="#a855f7" strokeWidth="4" /><path d="M 25 35 Q 29 38 33.5 35" fill="none" stroke="#a855f7" strokeWidth="3" /><path d="M 33.5 35 Q 39 38 45 35" fill="none" stroke="#a855f7" strokeWidth="3" /></>}
        {type === 'perp_bisector' && <><line x1="50" y1="30" x2="50" y2="100" stroke="#f59e0b" strokeWidth="4" /><path d="M 50 73 L 57 73 L 57 80" fill="none" stroke="#f59e0b" strokeWidth="3" /><circle cx="50" cy="80" r="4" fill="#f59e0b" /><line x1="28" y1="77" x2="32" y2="83" stroke="#334155" strokeWidth="3" /><line x1="68" y1="77" x2="72" y2="83" stroke="#334155" strokeWidth="3" /></>}
        
        <circle cx="30" cy="20" r="4" fill="#334155" /><circle cx="10" cy="80" r="4" fill="#334155" /><circle cx="90" cy="80" r="4" fill="#334155" />
      </svg>
    );

    // --- COMPONENT H√åNH T·ªîNG H·ª¢P CHO C√ÇU H·ªéI 4 ---
    const AllLinesTriangle = () => (
      <svg viewBox="0 0 100 100" className="w-full h-full overflow-visible filter drop-shadow-md">
        <polygon points="20,20 10,80 90,80" fill="#f8fafc" stroke="#334155" strokeWidth="2" strokeLinejoin="round" />
        <line x1="28" y1="77" x2="32" y2="83" stroke="#334155" strokeWidth="1.5" />
        <line x1="68" y1="77" x2="72" y2="83" stroke="#334155" strokeWidth="1.5" />
        <line x1="20" y1="20" x2="20" y2="80" stroke="#ef4444" strokeWidth="2" />
        <path d="M 20 76 L 24 76 L 24 80" fill="none" stroke="#ef4444" strokeWidth="1.5" />
        <line x1="20" y1="20" x2="42" y2="80" stroke="#a855f7" strokeWidth="2" />
        <path d="M 17.5 35 Q 21.5 38 25.5 35" fill="none" stroke="#a855f7" strokeWidth="1.5" />
        <path d="M 25.5 35 Q 31.5 38 37.5 35" fill="none" stroke="#a855f7" strokeWidth="1.5" />
        <line x1="20" y1="20" x2="50" y2="80" stroke="#3b82f6" strokeWidth="2" />
        <line x1="50" y1="25" x2="50" y2="95" stroke="#f59e0b" strokeWidth="2" />
        <path d="M 50 76 L 54 76 L 54 80" fill="none" stroke="#f59e0b" strokeWidth="1.5" />
        <circle cx="20" cy="20" r="3" fill="#334155" />
        <text x="20" y="14" fontSize="8" fontWeight="bold" textAnchor="middle" fill="#334155">A</text>
        <circle cx="10" cy="80" r="3" fill="#334155" />
        <text x="5" y="85" fontSize="8" fontWeight="bold" fill="#334155">B</text>
        <circle cx="90" cy="80" r="3" fill="#334155" />
        <text x="95" y="85" fontSize="8" fontWeight="bold" textAnchor="end" fill="#334155">C</text>
        <circle cx="20" cy="80" r="2.5" fill="#ef4444" />
        <text x="20" y="90" fontSize="7" fontWeight="bold" textAnchor="middle" fill="#ef4444">H</text>
        <circle cx="42" cy="80" r="2.5" fill="#a855f7" />
        <text x="42" y="90" fontSize="7" fontWeight="bold" textAnchor="middle" fill="#a855f7">D</text>
        <circle cx="50" cy="80" r="2.5" fill="#3b82f6" />
        <text x="50" y="90" fontSize="7" fontWeight="bold" textAnchor="middle" fill="#3b82f6">M</text>
        <text x="54" y="30" fontSize="8" fontWeight="bold" fill="#f59e0b">d</text>
      </svg>
    );

    // --- PH·∫¶N 1: KH√ÅI NI·ªÜM & B√ÄI T·∫¨P PH√ÇN BI·ªÜT ---
    const ConceptSection = () => {
      const [quizState, setQuizState] = useState({});
      const [matchState, setMatchState] = useState({ AH: null, AM: null, AD: null, d: null });
      const [currentStep, setCurrentStep] = useState(0);

      const compliments = ["Xu·∫•t s·∫Øc! üéâ", "Tuy·ªát v·ªùi qu√°! üåü", "Ch√≠nh x√°c 100%! üëç", "Qu√° ƒë·ªânh lu√¥n! üöÄ", "Th√¥ng minh l·∫Øm! üß†"];
      const getRandomCompliment = () => compliments[Math.floor(Math.random() * compliments.length)];

      const questions = [
        {
          id: 'q1',
          type: 'image',
          q: "C√¢u 1: Trong 4 h√¨nh d∆∞·ªõi ƒë√¢y, h√¨nh n√†o v·∫Ω ƒê√öNG ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa tam gi√°c?",
          options: [
            { id: 'altitude', label: 'H√¨nh 1 (ƒê∆∞·ªùng m√†u ƒë·ªè)' },
            { id: 'median', label: 'H√¨nh 2 (ƒê∆∞·ªùng m√†u xanh)' },
            { id: 'bisector', label: 'H√¨nh 3 (ƒê∆∞·ªùng m√†u t√≠m)' },
            { id: 'perp_bisector', label: 'H√¨nh 4 (ƒê∆∞·ªùng m√†u cam)' }
          ],
          ans: 'bisector',
          explanation: 'H√¨nh 3 l√† ƒë∆∞·ªùng ph√¢n gi√°c v√¨ c√≥ k√Ω hi·ªáu chia ƒë√¥i g√≥c ·ªü ƒë·ªânh. H√¨nh 1 l√† ƒê∆∞·ªùng cao, H√¨nh 2 l√† Trung tuy·∫øn, H√¨nh 4 l√† Trung tr·ª±c.'
        },
        {
          id: 'q2',
          type: 'text',
          q: "C√¢u 2: D·∫•u hi·ªáu b·∫±ng l·ªùi n√†o sau ƒë√¢y d√πng ƒë·ªÉ nh·∫≠n bi·∫øt ƒê∆Ø·ªúNG PH√ÇN GI√ÅC xu·∫•t ph√°t t·ª´ m·ªôt ƒë·ªânh c·ªßa tam gi√°c?",
          options: [
            "ƒêo·∫°n th·∫≥ng ƒëi qua trung ƒëi·ªÉm c·ªßa c·∫°nh ƒë·ªëi di·ªán.",
            "ƒêo·∫°n th·∫≥ng k·∫ª t·ª´ ƒë·ªânh v√† vu√¥ng g√≥c v·ªõi c·∫°nh ƒë·ªëi di·ªán.",
            "ƒêo·∫°n th·∫≥ng k·∫ª t·ª´ ƒë·ªânh v√† chia g√≥c ·ªü ƒë·ªânh ƒë√≥ th√†nh hai g√≥c b·∫±ng nhau.",
            "ƒê∆∞·ªùng th·∫≥ng ƒëi qua trung ƒëi·ªÉm v√† vu√¥ng g√≥c v·ªõi ƒëo·∫°n th·∫≥ng."
          ],
          ans: "ƒêo·∫°n th·∫≥ng k·∫ª t·ª´ ƒë·ªânh v√† chia g√≥c ·ªü ƒë·ªânh ƒë√≥ th√†nh hai g√≥c b·∫±ng nhau.",
          explanation: "ƒê∆∞·ªùng ph√¢n gi√°c lu√¥n g·∫Øn li·ªÅn v·ªõi ƒë·∫∑c ƒëi·ªÉm c·ªët l√µi l√† 'chia ƒë√¥i g√≥c'."
        },
        {
          id: 'q3',
          type: 'text',
          q: "C√¢u 3: Khi v·∫Ω ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa m·ªôt g√≥c trong tam gi√°c, ta B·∫ÆT BU·ªòC ph·∫£i ƒë√°nh d·∫•u k√Ω hi·ªáu n√†o tr√™n h√¨nh ƒë·ªÉ ph√¢n bi·ªát v·ªõi c√°c ƒë∆∞·ªùng kh√°c?",
          options: [
            "K√Ω hi·ªáu g√≥c vu√¥ng (90 ƒë·ªô) t·∫°i ƒëi·ªÉm c·∫Øt c·∫°nh ƒë·ªëi di·ªán.",
            "K√Ω hi·ªáu hai ƒëo·∫°n th·∫≥ng b·∫±ng nhau ·ªü c·∫°nh ƒë·ªëi di·ªán.",
            "K√Ω hi·ªáu hai g√≥c ·ªü ƒë·ªânh b·∫±ng nhau (th∆∞·ªùng d√πng chung 1 v·∫°ch ho·∫∑c 1 v√≤ng cung).",
            "Ch·ªâ c·∫ßn v·∫Ω b·∫±ng th∆∞·ªõc th·∫≥ng, kh√¥ng c·∫ßn k√Ω hi·ªáu."
          ],
          ans: "K√Ω hi·ªáu hai g√≥c ·ªü ƒë·ªânh b·∫±ng nhau (th∆∞·ªùng d√πng chung 1 v·∫°ch ho·∫∑c 1 v√≤ng cung).",
          explanation: "K√Ω hi·ªáu hai g√≥c b·∫±ng nhau ch√≠nh l√† 'ch·ª©ng minh th∆∞' ƒë·ªÉ nh·∫≠n di·ªán ƒë∆∞·ªùng ph√¢n gi√°c tr√™n h√¨nh v·∫Ω."
        }
      ];

      const handleSelect = (qId, selectedOpt, correctAns, explanation) => {
        if (quizState[qId]?.isCorrect) return; 
        
        if (selectedOpt === correctAns) {
          setQuizState({ ...quizState, [qId]: { isCorrect: true, msg: getRandomCompliment(), exp: explanation } });
        } else {
          setQuizState({ ...quizState, [qId]: { isCorrect: false, msg: "·ªí ch∆∞a ƒë√∫ng r·ªìi, b·∫°n th·ª≠ suy nghƒ© v√† ch·ªçn l·∫°i nh√©!" } });
        }
      };

      const matchLines = [
        { id: 'AH', name: 'ƒêo·∫°n th·∫≥ng AH', correct: 'altitude', color: 'text-red-600' },
        { id: 'AD', name: 'ƒêo·∫°n th·∫≥ng AD', correct: 'bisector', color: 'text-purple-600' },
        { id: 'AM', name: 'ƒêo·∫°n th·∫≥ng AM', correct: 'median', color: 'text-blue-600' },
        { id: 'd', name: 'ƒê∆∞·ªùng th·∫≥ng d', correct: 'perp', color: 'text-amber-600' }
      ];

      const lineTypes = [
        { id: 'altitude', label: 'ƒê∆∞·ªùng Cao' },
        { id: 'median', label: 'Trung Tuy·∫øn' },
        { id: 'bisector', label: 'Ph√¢n Gi√°c' },
        { id: 'perp', label: 'Trung Tr·ª±c' }
      ];

      const handleMatch = (lineId, selectedTypeId) => {
        if (matchState[lineId] === 'correct') return;
        
        const line = matchLines.find(l => l.id === lineId);
        if (line.correct === selectedTypeId) {
          setMatchState({ ...matchState, [lineId]: 'correct' });
        } else {
          setMatchState({ ...matchState, [lineId]: 'wrong' });
          setTimeout(() => setMatchState(prev => ({ ...prev, [lineId]: null })), 1500);
        }
      };

      return (
        <div className="flex-1 overflow-y-auto p-4 sm:p-6 bg-gradient-to-b from-slate-50 to-purple-50">
          <div className="max-w-5xl mx-auto space-y-8">
            <div className="bg-white p-6 sm:p-10 rounded-[2.5rem] shadow-xl shadow-purple-100 border border-purple-50 relative overflow-hidden">
              <div className="absolute top-0 right-0 w-64 h-64 bg-purple-100 rounded-full blur-3xl opacity-50 -z-10 translate-x-1/2 -translate-y-1/2"></div>
              
              <h2 className="text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-700 to-indigo-600 mb-8 flex items-center gap-3">
                <Sparkles className="text-purple-600" size={36} /> Kh√°i ni·ªám ƒê∆∞·ªùng Ph√¢n Gi√°c
              </h2>
              
              <div className="flex flex-col md:flex-row gap-8 items-center">
                <div className="flex-1 space-y-6">
                  <p className="text-lg sm:text-xl text-slate-700 leading-relaxed font-medium">
                    Trong m·ªôt tam gi√°c, ƒëo·∫°n th·∫≥ng n·ªëi t·ª´ m·ªôt ƒë·ªânh v√† <strong className="text-purple-700 bg-purple-100 px-2 py-1 rounded-md">chia g√≥c ·ªü ƒë·ªânh ƒë√≥ th√†nh hai g√≥c c√≥ s·ªë ƒëo b·∫±ng nhau</strong> ƒë∆∞·ª£c g·ªçi l√† ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa tam gi√°c.
                  </p>
                  
                  <div className="bg-gradient-to-br from-indigo-50 to-purple-50 p-5 rounded-2xl border border-indigo-100 flex items-start gap-4">
                    <Info className="text-indigo-500 shrink-0 mt-1" size={28} />
                    <p className="text-indigo-900 text-lg">M·ªói tam gi√°c c√≥ ƒë√∫ng <strong>3 ƒë∆∞·ªùng ph√¢n gi√°c</strong> xu·∫•t ph√°t t·ª´ 3 ƒë·ªânh.</p>
                  </div>
                </div>

                <div className="w-full md:w-1/3 flex justify-center">
                  <AnimatedBisector />
                </div>
              </div>

              <div className="mt-8 bg-gradient-to-r from-amber-100 to-orange-50 border-l-[6px] border-amber-500 p-5 sm:p-6 rounded-r-2xl shadow-sm transform hover:scale-[1.01] transition-transform">
                <h4 className="flex items-center gap-2 font-black text-amber-800 text-xl mb-2">
                  <PenTool size={24} /> B√ç K√çP GHI V·ªû:
                </h4>
                <ul className="list-disc list-inside text-amber-900 space-y-2 text-lg font-medium">
                  <li>ƒê·∫∑c ƒëi·ªÉm nh·∫≠n d·∫°ng: <strong>Chia ƒë√¥i g√≥c</strong>.</li>
                  <li>K√Ω hi·ªáu b·∫Øt bu·ªôc: <strong>ƒê√°nh d·∫•u 2 g√≥c b·∫±ng nhau</strong> (v√≠ d·ª•: d√πng chung 1 v·∫°ch ho·∫∑c 1 v√≤ng cung).</li>
                </ul>
              </div>
            </div>

            <div className="bg-white p-6 sm:p-10 rounded-[2.5rem] shadow-xl shadow-slate-200 border border-slate-100">
              <h3 className="text-3xl font-black text-slate-800 mb-4 flex items-center gap-3">
                <CheckCircle2 className="text-emerald-500 w-10 h-10"/> Th·ª≠ th√°ch: V∆∞·ª£t ·∫¢i Nh·∫≠n Di·ªán
              </h3>
              <p className="text-slate-600 text-lg mb-8">H√£y v∆∞·ª£t qua 4 ·∫£i d∆∞·ªõi ƒë√¢y. N·∫øu ch·ªçn sai, ƒë·ª´ng lo l·∫Øng, b·∫°n c√≥ th·ªÉ ch·ªçn l·∫°i cho ƒë·∫øn khi t√¨m ra ƒë√°p √°n ƒë√∫ng nh√©!</p>
              
              <div className="space-y-8">
                {questions.map((q, index) => {
                  if (index > currentStep) return null;
                  const state = quizState[q.id];
                  return (
                    <div key={q.id} className={`p-6 sm:p-8 rounded-3xl border-2 transition-all duration-300 ${state?.isCorrect ? 'border-emerald-300 bg-emerald-50/30' : 'border-slate-100 bg-white hover:border-purple-200 hover:shadow-lg'}`}>
                      <h4 className="font-bold text-xl text-slate-800 mb-6">{q.q}</h4>
                      
                      {q.type === 'image' ? (
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                          {q.options.map(opt => (
                            <button 
                              key={opt.id} 
                              onClick={() => handleSelect(q.id, opt.id, q.ans, q.explanation)}
                              className={`p-4 rounded-2xl border-2 flex flex-col items-center gap-3 transition-all cursor-pointer bg-white
                                ${state?.isCorrect && opt.id === q.ans ? 'border-emerald-500 ring-4 ring-emerald-200 scale-105 bg-emerald-50' : 
                                  state?.isCorrect && opt.id !== q.ans ? 'opacity-40 border-slate-200 grayscale' :
                                  'border-slate-200 hover:border-purple-400 hover:shadow-md hover:-translate-y-1'}`}
                            >
                              <div className="w-24 h-24"><MiniTriangle type={opt.id} /></div>
                              <span className="font-bold text-slate-700 text-center">{opt.label}</span>
                            </button>
                          ))}
                        </div>
                      ) : (
                        <div className="grid grid-cols-1 gap-3 mb-4">
                          {q.options.map((opt, oIdx) => (
                            <button 
                              key={oIdx} 
                              onClick={() => handleSelect(q.id, opt, q.ans, q.explanation)}
                              className={`text-left p-4 rounded-2xl border-2 font-medium text-lg transition-all
                                ${state?.isCorrect && opt === q.ans ? 'border-emerald-500 bg-emerald-500 text-white shadow-md scale-[1.02]' : 
                                  state?.isCorrect && opt !== q.ans ? 'opacity-40 border-slate-200 bg-slate-50' :
                                  'border-slate-200 bg-white hover:border-purple-400 hover:bg-purple-50 text-slate-700 hover:scale-[1.01]'}`}
                            >
                              {opt}
                            </button>
                          ))}
                        </div>
                      )}

                      {state && !state.isCorrect && (
                        <div className="mt-4 p-4 bg-red-50 text-red-600 rounded-xl font-bold flex items-center gap-2 animate-bounce">
                          <AlertCircle /> {state.msg}
                        </div>
                      )}
                      {state?.isCorrect && (
                        <div className="mt-4 p-5 bg-emerald-100 rounded-2xl border border-emerald-200">
                          <p className="text-emerald-800 font-black text-xl mb-2 flex items-center gap-2">
                            <PartyPopper className="text-emerald-600" /> {state.msg}
                          </p>
                          <p className="text-emerald-900 text-lg leading-relaxed">{state.exp}</p>
                          
                          {currentStep === index && (
                            <button 
                              onClick={() => setCurrentStep(index + 1)}
                              className="mt-5 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl transition-all shadow-md hover:shadow-lg flex items-center gap-2 active:scale-95"
                            >
                              {index < 2 ? 'Ti·∫øp t·ª•c c√¢u h·ªèi sau' : 'ƒê·∫øn Tr√πm Cu·ªëi'} <ArrowRight size={20} />
                            </button>
                          )}
                        </div>
                      )}
                    </div>
                  );
                })}

                {currentStep >= 3 && (
                  <div className="p-6 sm:p-8 rounded-3xl border-2 border-indigo-200 bg-gradient-to-br from-indigo-50 to-purple-50 relative overflow-hidden duration-700">
                    <div className="absolute top-0 left-0 bg-indigo-500 text-white px-4 py-1 rounded-br-2xl font-bold uppercase text-sm tracking-wider">Tr√πm Cu·ªëi</div>
                    <h4 className="font-bold text-xl text-indigo-900 mb-2 mt-4">C√¢u 4: B·ª©c tranh to√†n c·∫£nh</h4>
                    <p className="text-indigo-700 mb-6 font-medium">H√¨nh v·∫Ω d∆∞·ªõi ƒë√¢y c√≥ ch·ª©a c·∫£ 4 lo·∫°i ƒë∆∞·ªùng k√®m theo c√°c k√Ω hi·ªáu h√¨nh h·ªçc. B·∫°n h√£y quan s√°t k·ªπ v√† ch·ªçn lo·∫°i ƒë∆∞·ªùng t∆∞∆°ng ·ª©ng v·ªõi t√™n g·ªçi c·ªßa n√≥ nh√©!</p>
                    
                    <div className="flex flex-col md:flex-row gap-8 items-center">
                      <div className="w-full md:w-1/2 max-w-sm bg-white p-4 rounded-3xl shadow-lg border border-indigo-100">
                        <AllLinesTriangle />
                      </div>
                      
                      <div className="w-full md:w-1/2 flex flex-col gap-4">
                        {matchLines.map((line) => {
                          const status = matchState[line.id];
                          return (
                            <div key={line.id} className="flex flex-col xl:flex-row xl:items-center justify-between bg-white p-4 rounded-2xl shadow-sm border border-slate-100 gap-3">
                              <span className={`font-black text-lg w-40 ${line.color}`}>{line.name}</span>
                              
                              {status === 'correct' ? (
                                <div className="flex items-center gap-2 text-emerald-600 font-bold bg-emerald-50 px-4 py-2 rounded-xl flex-1 justify-center">
                                  <CheckCircle2 size={20} /> L√† {lineTypes.find(t => t.id === line.correct).label}
                                </div>
                              ) : (
                                <div className="flex flex-wrap gap-2 flex-1 justify-end">
                                  {lineTypes.map(type => (
                                    <button 
                                      key={type.id}
                                      onClick={() => handleMatch(line.id, type.id)}
                                      className={`px-3 py-2 rounded-xl text-slate-600 bg-slate-50 hover:bg-indigo-100 hover:text-indigo-700 font-medium text-sm transition-all shadow-sm active:scale-95 border border-slate-200 ${status === 'wrong' ? 'animate-shake border-red-200' : ''}`}
                                    >
                                      {type.label}
                                    </button>
                                  ))}
                                </div>
                              )}
                              {status === 'wrong' && <span className="text-red-500 font-bold text-sm w-full xl:w-16 text-right animate-pulse mt-2 xl:mt-0">Th·ª≠ l·∫°i!</span>}
                            </div>
                          );
                        })}
                      </div>
                    </div>
                    
                    {Object.values(matchState).every(val => val === 'correct') && (
                      <div className="mt-8 p-6 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl shadow-lg text-center">
                        <h3 className="text-2xl font-black mb-2 flex justify-center items-center gap-2">
                          <Trophy className="text-yellow-400" size={32} /> CH√öC M·ª™NG B·∫†N! 
                        </h3>
                        <p className="text-indigo-100 text-lg">B·∫°n ƒë√£ ho√†n th√†nh xu·∫•t s·∫Øc th·ª≠ th√°ch v√† n·∫Øm c·ª±c v·ªØng c√°ch ph√¢n bi·ªát c√°c ƒë∆∞·ªùng trong tam gi√°c!</p>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      );
    };

    // --- COMPONENT CH√çNH ---
    const App = () => {
      return (
        <div className="flex flex-col flex-1 bg-white font-sans text-slate-800">
          <header className="bg-gradient-to-r from-purple-800 to-indigo-700 text-white px-6 py-4 shadow-lg z-20 shrink-0">
            <h1 className="text-2xl font-black uppercase tracking-tight flex items-center gap-2">
              To√°n 7 <span className="text-purple-300 font-normal">|</span> T√≠nh ch·∫•t ba ƒë∆∞·ªùng ph√¢n gi√°c c·ªßa tam gi√°c
            </h1>
          </header>
          
          <nav className="flex bg-white border-b border-slate-200 px-4 shrink-0 shadow-sm z-10">
            <button className="flex items-center gap-2 px-6 py-4 font-bold border-b-4 border-purple-600 text-purple-700 bg-purple-50/50 transition-colors">
              <BookOpen size={20} /> Ph·∫ßn 1: Kh√°i ni·ªám & Ph√¢n bi·ªát
            </button>
          </nav>

          <ConceptSection />
        </div>
      );
    };

    // Render ·ª®ng D·ª•ng
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
